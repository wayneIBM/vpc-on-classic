---

copyright:
  years: 2018, 2019
lastupdated: "2019-05-17"

keywords: create, configure, permissions, ACL, virtual, server, instance, subnet, block, storage, volume, security, group, images, Windows, Linux, example, monitoring, VPN, load balancer, IKE, IPsec

subcollection: vpc-on-classic

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:important: .important}
{:download: .download}
{:DomainName: data-hd-keyref="DomainName"}

# {{site.data.keyword.cloud_notm}} 콘솔을 사용하여 VPC 작성
{: #creating-a-vpc-using-the-ibm-cloud-console}
[comment]: # (링크된 도움말 항목)

이 문서에서는 {{site.data.keyword.cloud_notm}} 콘솔을 사용하여 {{site.data.keyword.cloud}} Virtual Private Cloud를 작성하고 구성하는 방법을 보여줍니다. 

가상 프라이빗 클라우드(VPC) 및 여기에 연결되는 기타 리소스를 작성하고 구성하려면 다음 절의 단계를 다음 순서에 따라 수행하십시오.

1. VPC 및 서브넷을 작성하여 네트워크를 정의하십시오. 서브넷을 작성할 때 공용 게이트웨이를 연결하여 서브넷의 모든 리소스가 공용 인터넷과 통신할 수 있도록 하십시오. 
1. 액세스 제어 목록(ACL)을 구성하여 서브넷의 인바운드 및 아웃바운드 트래픽을 제한하십시오. 기본적으로는 모든 트래픽이 허용됩니다.
1. 가상 서버 인스턴스를 작성하십시오.
1. 블록 스토리지 볼륨을 작성하여 인스턴스에 연결하십시오.
1. 보안 그룹을 구성하여 인스턴스에 허용되는 인바운드 및 아웃바운드 트래픽을 정의하십시오.
1. 유동 IP 주소를 예약하고 연관시켜 인터넷에서 인스턴스에 접근할 수 있도록 하십시오.
1. 로드 밸런서를 작성하여 여러 인스턴스에 요청을 분배하십시오.
1. 가상 사설망(VPN)을 작성하여 VPC가 사용자의 온프레미스 네트워크 또는 다른 VPC 등의 다른 사설 네트워크에 안전하게 연결할 수 있도록 하십시오.

## 시작하기 전에
{: #before}
VPC에서 리소스를 작성하고 관리할 수 있는 권한이 있는지 확인하십시오. 자세한 정보는 [VPC 리소스에 대한 사용자 권한 관리](/docs/vpc-on-classic?topic=vpc-on-classic-managing-user-permissions-for-vpc-resources)를 참조하십시오.

가상 서버 인스턴스에 연결하는 데 사용될 SSH 키를 생성하십시오. 예를 들면, 명령 `ssh-keygen -t rsa -C "user_ID"`를 실행하여 Linux 서버에서 SSH 키를 생성하십시오. 이 명령은 두 개의 파일을 생성합니다. 생성된 공개 키는 `<your key>.pub` 파일에 있습니다.

로드 밸런서를 작성하고 리스너에 HTTPS를 사용하려는 경우에는 SSL 인증서가 필요합니다. 인증서는 [IBM Certificate Manager ![외부 링크 아이콘](../../icons/launch-glyph.svg "외부 링크 아이콘")](https://{DomainName}/catalog/services/certificate-manager){: new_window}를 사용하여 관리할 수 있습니다. 또한 로드 밸런서 인스턴스가 SSL 인증서를 포함하는 Certificate Manager 인스턴스에 액세스할 수 있도록 권한을 작성해야 합니다. 권한은 [Identity and Access Authorizations ![외부 링크 아이콘](../../icons/launch-glyph.svg "외부 링크 아이콘")](https://{DomainName}/iam/#/authorizations){: new_window}에서 작성할 수 있습니다. 소스의 경우에는 **VPC 인프라**를 소스 서비스로, **VPC용 Load Balancer**를 리소스 유형으로, **모든 리소스 인스턴스**를 소스 리소스 인스턴스로 선택하십시오. **Certificate Manager**를 대상 서비스로 선택하고 서비스 액세스 역할에 대해 **작성자**를 지정하십시오. 대상 서비스 인스턴스를 **모든 인스턴스**, 또는 사용자의 특정 Certificate Manager 인스턴스로 설정하십시오. 자세한 정보는 [IBM Cloud VPC에서의 Load Balancers 사용](/docs/vpc-on-classic-network?topic=vpc-on-classic-network---using-load-balancers-in-ibm-cloud-vpc)을 참조하십시오.

## VPC 및 서브넷 작성

VPC 및 서브넷을 작성하려면 다음 작업을 수행하십시오.

1. [{{site.data.keyword.cloud_notm}} 콘솔 ![외부 링크 아이콘](../../icons/launch-glyph.svg "외부 링크 아이콘")](https://{DomainName}){: new_window}을 여십시오.
1. **메뉴 아이콘 ![메뉴 아이콘](../../icons/icon_hamburger.svg) > VPC 인프라 > 네트워크 > VPC**를 클릭하고 **새 가상 프라이빗 클라우드**를 클릭하십시오. 
1. VPC의 이름을 입력하십시오(예: `my-vpc`).
1. VPC의 리소스 그룹과 여기에 연결되는 모든 리소스를 선택하십시오. 리소스 그룹은 계정 리소스를 액세스 제어 및 청구 용도로 구성할 수 있게 해 줍니다. 자세한 정보는 [리소스를 리소스 그룹으로 구성하는 데 대한 우수 사례](/docs/resources?topic=resources-bp_resourcegroups)를 참조하십시오.
1. _선택사항:_ 리소스를 구성하고 찾는 데 도움을 주는 태그를 입력하십시오. 나중에 태그를 추가할 수 있습니다. 자세한 정보는 [태그 작업](/docs/resources?topic=resources-tag)을 참조하십시오.
1. 이 VPC의 새 서브넷에 대한 기본 ACL을 선택하거나 작성하십시오. 이 튜토리얼에서는 새 기본 ACL을 작성합니다. ACL에 대한 규칙은 나중에 구성할 것입니다.
1. 기본 보안 그룹이 이 VPC의 가상 서버 인스턴스에 대한 인바운드 SSH 및 ping 트래픽을 허용하는지 선택하십시오. 기본 보안 그룹에 대한 추가 규칙은 나중에 구성할 것입니다.
1. VPC의 새 서브넷에 대한 이름을 입력하십시오(예: `my-subnet`).
1. 서브넷의 위치를 선택하십시오. 이 위치는 지역 및 구역으로 구성됩니다.

    선택하는 지역은 VPC의 지역으로 사용됩니다. 이 VPC에서 작성하는 모든 추가 리소스는 선택한 지역에 작성됩니다.
    {: tip}

1. 서브넷의 IP 범위를 CIDR 표기법으로 입력하십시오(예: `10.240.0.0/24`). 대부분의 경우에는 기본 IP 범위를 사용할 수 있습니다. 사용자 지정 IP 범위를 지정하려는 경우에는 IP 범위 계산기를 사용하여 다른 주소 접두부를 선택하거나 주소 수를 변경할 수 있습니다.
1. 서브넷의 ACL을 선택하십시오. 이 VPC에 대해 작성된 기본 ACL을 사용하려면 **VPC 기본값 사용**을 선택하십시오.
1. 공용 게이트웨이를 서브넷에 연결하여 모든 연결된 리소스가 공용 인터넷과 통신할 수 있도록 하십시오.  

    서브넷을 작성한 후 공용 게이트웨이를 연결할 수도 있습니다.
    {: tip}

1. **가상 프라이빗 클라우드 작성**을 클릭하십시오.
1. 이 VPC에 다른 서브넷을 추가 작성하려면 **서브넷** 탭을 클릭하고 **새 서브넷**을 클릭하십시오. 서브넷을 정의할 때는 반드시 **가상 프라이빗 클라우드** 필드에서 `my_vpc`를 선택해야 합니다.

## ACL 구성

ACL을 구성하여 서브넷에 대한 인바운드 및 아웃바운드 트래픽을 제한할 수 있습니다. 기본적으로는 모든 트래픽이 허용됩니다.

각 서브넷은 하나의 ACL에만 연결될 수 있습니다. 그러나 각 ACL은 여러 서브넷에 연결될 수 있습니다.

ACL을 구성하려면 다음 작업을 수행하십시오.

1. 탐색 분할창에서 **네트워크 > 서브넷**을 클릭하십시오.
1. 작성한 서브넷을 클릭하십시오.
1. **서브넷 세부사항** 영역에서 ACL의 이름을 클릭하십시오.
1. **규칙 추가**를 클릭하여 서브넷에서 송수신할 수 있도록 허용되는 트래픽을 정의하는 인바운드 및 아웃바운드 규칙을 구성하십시오. 각 규칙에 대해 다음 정보를 지정하십시오.  
   * 규칙의 우선 순위를 지정하십시오. 낮은 숫자가 지정된 규칙이 먼저 평가되며 더 높은 숫자가 지정된 규칙을 오버라이드합니다. 예를 들어, 우선순위 2가 지정된 규칙이 HTTP 트래픽을 허용하며 우선순위 5가 지정된 규칙이 모든 트래픽을 거부하는 경우 HTTP 트래픽은 여전히 허용됩니다.  
   * 지정된 트래픽의 허용 또는 거부 여부를 선택하십시오.  
   * CIDR 블록을 지정하여 규칙이 적용되는 IP 범위를 표시하십시오.
   * 규칙이 적용되는 프로토콜 및 포트를 선택하십시오.
1. 규칙 작성을 완료했으면 페이지 맨 위에 있는 **모든 액세스 제어 목록** 이동 경로를 클릭하십시오.

### ACL 예

예를 들면, 다음 작업을 수행하는 인바운드 규칙을 구성할 수 있습니다.

 1. 인터넷으로부터의 HTTP 트래픽 허용
 1. 서브넷 10.10.20.0/24로부터의 모든 인바운드 트래픽 허용
 1. 다른 모든 인바운드 트래픽 거부  

그 후, 다음 작업을 수행하는 아웃바운드 규칙을 구성하십시오.

1. 인터넷으로의 HTTP 트래픽 허용
1. 서브넷 10.10.20.0/24로의 모든 아웃바운드 트래픽 허용
1. 다른 모든 아웃바운드 트래픽 거부  

![샘플 인바운드 및 아웃바운드 규칙 표시](images/acl-rules.png)

## 가상 서버 인스턴스 작성

새로 작성된 서브넷에 가상 서버 인스턴스를 작성하려면 다음 작업을 수행하십시오.

1. 탐색 분할창에서 **컴퓨팅 > 가상 서버 인스턴스**를 클릭하고 **새 인스턴스**를 클릭하십시오.
1. 인스턴스의 이름을 입력하십시오(예: `my-instance`).
1. 작성한 VPC를 선택하십시오.
1. **위치** 필드에서 인스턴스를 작성할 구역을 선택하십시오.
1. Ubuntu Linux 16.04와 같은 이미지(운영 체제 및 버전)를 선택하십시오.
1. 인스턴스 크기를 설정하려면 인기 있는 프로파일 중 하나를 선택하거나, **모든 프로파일**을 클릭하고 자신의 워크로드에 가장 적합한 다른 코어 및 RAM 조합을 선택하십시오.
1. 가상 서버 인스턴스에 액세스하는 데 사용할 기존 SSH 키를 선택하거나 새 SSH 키를 추가하십시오. SSH 키를 추가하려면 **새 키**를 클릭하고 키의 이름을 지정하십시오. 이전에 생성된 공개 키 값을 입력한 후 **SSH 키 추가**를 클릭하십시오.

처음에 VSI 작성의 일부로만 키를 추가할 수 있습니다. 나중에 키를 추가할 수 있는 도구를 없습니다.
{:tip}

1. _선택사항:_ 인스턴스가 시작될 때 일반 구성 태스크를 실행하는 데 필요한 사용자 데이터를 입력하십시오. 예를 들면, Linux 이미지를 위한 cloud-init 지시문 또는 쉘 스크립트를 지정할 수 있습니다. 자세한 정보는 [사용자 데이터](/docs/vpc-on-classic-vsi?topic=vpc-on-classic-vsi-user-data)를 참조하십시오.
1. 부트 볼륨을 기록하십시오. 현재 릴리스에서는 부트 볼륨에 100GB가 할당됩니다. 이 볼륨에 대해서는 *자동 삭제*가 사용으로 설정되며, 이는 인스턴스가 삭제되면 자동으로 삭제됩니다.
1. **연결된 블록 스토리지 볼륨** 영역에서 **새 블록 스토리지 볼륨**을 클릭하여 블록 스토리지 볼륨을 인스턴스에 연결할 수 있습니다. 이 튜토리얼에서는 블록 스토리지 볼륨을 작성하고 나중에 이를 인스턴스에 연결합니다.
1. **네트워크 인터페이스** 영역에서 네트워크 인터페이스를 편집하고 해당 이름을 변경할 수 있습니다. 선택한 구역 및 VPC에 둘 이상의 서브넷이 있는 경우에는 다른 서브넷을 인터페이스에 연결할 수 있습니다. 인스턴스가 여러 서브넷에 존재하도록 하려는 경우에는 추가 인터페이스를 작성할 수 있습니다.

   각 인터페이스에 연결할 보안 그룹을 선택할 수도 있습니다. 기본적으로는 VPC의 기본 보안 그룹이 연결됩니다. 기본 보안 그룹은 인바운드 SSH 및 ping 트래픽, 모든 아웃바운드 트래픽, 그룹 내 인스턴스 간의 모든 트래픽을 허용합니다. 다른 모든 트래픽은 차단되며, 사용자는 더 많은 트래픽을 허용하도록 규칙을 구성할 수 있습니다. 나중에 기본 보안 그룹의 규칙을 편집하는 경우, 이러한 업데이트된 규칙은 그룹의 모든 현재 및 미래 인스턴스에 적용됩니다.

1. **가상 서버 인스턴스 작성**을 클릭하십시오. 인스턴스의 상태가 *보류 중*으로 시작하여 *중지됨*으로 변경되고, 그 후 *전원 켜짐*으로 변경됩니다. 상태 변경을 확인하려면 페이지를 새로 고쳐야 할 수 있습니다.

## 블록 스토리지 볼륨 작성 및 연결

블록 스토리지 볼륨을 작성하여 가상 서버 인스턴스에 연결할 수 있습니다.

블록 스토리지 볼륨을 작성하고 연결하려면 다음 작업을 수행하십시오.

1. 탐색 분할창에서 **스토리지 > 블록 스토리지 볼륨**을 클릭하십시오.
1. VPC용 블록 스토리지 볼륨 페이지에서 **새 볼륨**을 클릭하고 다음 정보를 지정하십시오.
  * **이름**: 블록 스토리지 볼륨의 이름을 입력하십시오(`data-volume-1`).  
  * **리소스 그룹**: 블록 스토리지 볼륨의 리소스 그룹을 선택하십시오. 리소스 그룹은 계정 리소스를 액세스 제어 및 청구 용도로 구성할 수 있게 해 줍니다. 자세한 정보는 [리소스를 리소스 그룹으로 구성하는 데 대한 우수 사례](/docs/resources?topic=resources-bp_resourcegroups)를 참조하십시오.
  * **태그**: _선택사항:_ 리소스를 구성하고 찾는 데 도움이 되는 태그를 입력하십시오. 나중에 태그를 추가할 수 있습니다. 자세한 정보는 [태그 작업](/docs/resources?topic=resources-tag)을 참조하십시오.
  * **위치**: 블록 스토리지 볼륨의 위치를 선택하십시오. 위치는 지역 및 구역으로 구성됩니다(예: 미국 남부 1).
  * **크기**: 10GB - 2000GB 사이의 볼륨 크기를 지정하십시오.
  * **IOP**: IOP 티어 중 하나를 선택하거나 사용자 정의를 클릭하여 볼륨 크기를 기반으로 IOP 값을 입력하십시오.
  * **암호화**: 기본 제공자 관리 암호화를 승인하거나 고객 관리를 선택하고 사용자 고유의 암호화 키를 사용하십시오. 이 단계에서는 Key Protect 서비스 인스턴스를 프로비저닝하고 루트 키를 작성하거나 가져와야 합니다. 자세한 정보는 [고객 관리 암호화를 사용하여 블록 스토리지 볼륨 작성](/docs/vpc-on-classic-block-storage?topic=vpc-on-classic-block-storage-block-storage-encryption#data-vol-encryption-ui)을 참조하십시오.
1. **볼륨 작성**을 클릭하십시오.
1. 블록 스토리지 볼륨 목록에서 작성한 볼륨을 찾으십시오. 상태가 사용 가능이면 "..."를 클릭하고 **인스턴스에 연결**을 선택하십시오.
1. 볼륨을 연결할 인스턴스를 선택하고 **연결**을 클릭하십시오.

## 인스턴스에 대한 보안 그룹 구성

보안 그룹을 구성하여 인스턴스에 허용되는 인바운드 및 아웃바운드 트래픽을 정의할 수 있습니다. 예를 들면, 회사의 보안 정책을 기반으로 서브넷에 대한 ACL 규칙을 구성한 후 워크로드에 따라 특정 인스턴스에 대한 트래픽을 추가로 제한할 수 있습니다.

보안 그룹을 구성하려면 다음 작업을 수행하십시오.

1. 가상 서버 인스턴스 페이지에서 인스턴스를 클릭하여 세부사항을 보십시오.
1. **네트워크 인터페이스** 섹션에서 보안 그룹을 클릭하십시오.
1. **규칙 추가**를 클릭하여 인스턴스에서 송수신할 수 있도록 허용되는 트래픽을 정의하는 인바운드 및 아웃바운드 규칙을 구성하십시오. 각 규칙에 대해 다음 정보를 지정하십시오.  
   * 허용되는 트래픽에 대한 CIDR 블록 또는 IP 주소를 지정하십시오. 동일한 VPC에서 보안 그룹을 지정하여 선택된 보안 그룹에 연결된 모든 인스턴스의 송수신 트래픽을 허용할 수도 있습니다.   
   * 규칙이 적용되는 프로토콜 및 포트를 선택하십시오.    

   **팁:**  
  * 추가된 순서에 관계없이 모든 규칙이 평가됩니다.
  * 규칙은 Stateful이며, 이는 허용된 트래픽에 대한 응답인 리턴 트래픽이 자동으로 허용됨을 의미합니다. 예를 들어, 포트 80을 통한 인바운드 TCP 트래픽을 허용하는 규칙은 추가 규칙을 작성할 필요 없이 소스 호스트로의, 포트 80을 통한 응답 아웃바운드 TCP 트래픽을 허용합니다.
1. _선택사항:_ 이 보안 그룹을 다른 인스턴스에 연결하려는 경우에는 탐색 분할창에서 **연결된 인터페이스**를 클릭하고 추가 인터페이스를 선택하십시오.
1. 규칙 작성을 완료했으면 페이지 맨 위에 있는 **모든 보안 그룹** 이동 경로를 클릭하십시오.

### 보안 그룹 예  

예를 들면, 다음 작업을 수행하는 인바운드 규칙을 구성할 수 있습니다.

 * 모든 SSH 트래픽 허용(TCP 포트 22)
 * 모든 ping 트래픽 허용(ICMP 포트 8)

그 후, 모든 TCP 트래픽을 허용하는 아웃바운드 규칙을 구성하십시오.

![샘플 인바운드 및 아웃바운드 규칙 표시](images/sg-example-ui.png)

## 유동 IP 주소 예약

유동 IP 주소를 예약하고 연관시켜 인터넷에서 인스턴스에 접근할 수 있도록 하십시오.  

유동 IP 주소를 연관시키려면 인스턴스가 실행 중이어야 합니다. 인스턴스가 시작되어 실행되는 데 몇 분 정도 소요될 수 있습니다.
{: tip}

유동 IP 주소를 예약하고 연관시키려면 다음 작업을 수행하십시오.

1. 가상 서버 인스턴스 페이지에서 인스턴스를 클릭하여 세부사항을 보십시오.
1. **네트워크 인터페이스** 섹션에서 유동 IP 주소를 연관시킬 인터페이스에 대해 **예약**을 클릭하십시오.

나중에 동일한 구역의 다른 인스턴스에 이 유동 IP 주소를 다시 지정하려는 경우에는 **네트워크 > 유동 IP** 페이지에서 해당 유동 IP 주소를 찾고 해당 오버플로우 메뉴(**...**)를 클릭한 후 **연관 해제**를 클릭하십시오. 그 후 **연관**을 클릭하여 이 유동 IP 주소와 연관시킬 인스턴스 및 네트워크 인터페이스를 선택하십시오.
{: tip}

## 인스턴스에 연결
작성한 유동 IP 주소를 사용해 인스턴스에 대해 ping을 실행하여, 해당 인스턴스가 시작되어 실행 중인지 확인하십시오.

```
ping <public-ip-address>
```
{:pre}


### Linux 이미지에 연결

공용 SSH 키를 사용하여 인스턴스를 작성한 후에는 사용자의 개인 키를 사용하여 여기에 연결할 수 있습니다.


```
ssh -i <path-to-private-key-file> root@<public-ip-address>
```
{:pre}

인스턴스에 연결하는 방법에 대한 자세한 정보는 [Linux를 사용하는 인스턴스에 연결](/docs/vpc-on-classic-vsi?topic=vpc-on-classic-vsi-connecting-to-your-linux-instance)을 참조하십시오.

### Windows 이미지에 연결
Windows 이미지에 연결하려면 해당 복호화된 비밀번호를 사용하여 로그인하십시오. 복호화된 비밀번호를 얻으려면 인스턴스의 세부사항 페이지에서 암호화된 비밀번호를 복사한 후 다음 명령을 실행하십시오.

```
# Decode the encrypted password
cat ~/examplepwd | base64 --decode > ~/examplepwd64
# Decrypt the decoded password using the RSA private key
openssl pkeyutl -in ~/examplepwd64 -decrypt -inkey private.pem -pkeyopt rsa_padding_mode:oaep -pkeyopt rsa_oaep_md:sha256
-pkeyopt rsa_mgf1_md:sha256
```
{:codeblock}


인스턴스에 연결하는 방법에 대한 자세한 정보는 [Windows 인스턴스에 연결](/docs/vpc-on-classic-vsi?topic=vpc-on-classic-vsi-connecting-to-your-windows-instance)을 참조하십시오.



## 인스턴스 모니터링

인스턴스가 시작되거나, 중지되거나 다시 부팅된 시점을 보여주는 활동 로그를 보려면 탐색 분할창에서 **활동**을 클릭하십시오.

## 로드 밸런서 작성
로드 밸런서를 작성하여 인바운드 트래픽을 여러 인스턴스에 분배할 수 있습니다.

로드 밸런서를 작성하려면 다음 작업을 수행하십시오.
1. 탐색 분할창에서 **네트워크 > 로드 밸런서**를 클릭하십시오.
1. 로드 밸런서 페이지에서 **새 로드 밸런서**를 클릭하고 다음 정보를 지정하십시오.
    * **이름**: 로드 밸런서의 이름을 입력하십시오(예: `my-load-balancer`).
    * **가상 프라이빗 클라우드**: VPC를 선택하십시오.
    * **리소스 그룹**: 로드 밸런서의 리소스 그룹을 선택하십시오.
    * **유형**: 로드 밸런서 유형(공용 또는 사설)을 선택하십시오.
    * **지역**: 로드 밸런서가 작성될 지역, 즉 VPC에 대해 선택된 지역을 표시합니다.
    * **서브넷**: 로드 밸런서를 작성할 서브넷을 선택하십시오. 애플리케이션의 가용성을 최대화하려면 여러 구역의 서브넷을 선택하십시오.
1. **새 풀**을 클릭하고 다음 정보를 지정하여 백엔드 풀을 작성하십시오. 풀은 하나 이상 작성할 수 있습니다.
    * **이름**: 풀의 이름을 입력하십시오(예: `my-pool`).
    * **프로토콜**: 로드 밸런서 뒤에 있는 백엔드 인스턴스의 프로토콜을 선택하십시오. 풀의 프로토콜은 연관된 리스너의 프로토콜과 일치해야 합니다. 예를 들어, 리스너에 대해 HTTPS 또는 HTTP 프로토콜이 선택된 경우 풀의 프로토콜은 HTTP여야 합니다. 마찬가지로, 리스너 프로토콜이 TCP인 경우 백엔드 풀의 프로토콜은 TCP여야 합니다.
    * **방법**: 로드 밸런서가 백엔드 인스턴스 간에 트래픽을 분배하는 방법을 선택하십시오.
      * **라운드 로빈:** 요청을 차례대로 각 인스턴스에 전달합니다. 모든 인스턴스가 대략 동일한 수의 클라이언트 연결을 수신합니다.
      * **가중치 적용된 라운드 로빈:** 지정된 가중치에 비례하여 각 인스턴스에 요청을 전달합니다. 예를 들어 인스턴스 A, B 및 C가 있고 해당 가중치가 60, 60 및 3으로 설정된 경우, 인스턴스 A 및 B는 동일한 수의 연결을 수신하며 인스턴스 C는 그 절반의 연결을 수신합니다.
      * **최소 연결:** 현재 연결 수가 가장 적은 인스턴스에 요청을 전달합니다.  
    * **세션 일관성**: 특정 사용자의 세션 중에 모든 요청이 동일한 인스턴스에 전송되는지 선택하십시오.  
    * **상태 확인**: 로드 밸런서가 인스턴스의 상태를 확인하는 방법을 구성하십시오.
      * **상태 프로토콜**: 로드 밸런서가 백엔드 인스턴스에 상태 확인 메시지를 전송하는 데 사용되는 프로토콜입니다.
      * **상태 경로**: 상태 경로는 상태 확인 프로토콜로 HTTP가 선택된 경우에만 적용됩니다. 상태 경로는 로드 밸런서가 백엔드 인스턴스에 상태 HTTP 상태 확인 요청을 전송하는 데 사용되는 URL을 지정합니다. 기본적으로 상태 확인은 루트 경로(`/`)로 전송됩니다.
      * **간격**: 두 연속된 상태 확인 시도 간의 간격(초)입니다. 기본적으로 상태 확인은 5초마다 전송됩니다.
      * **제한시간**: 시스템이 상태 확인 요청에 대한 응답을 기다리는 최대 시간입니다. 기본적으로 로드 밸런서는 2초 동안 응답을 기다립니다.
      * **최대 재시도 수**: 백엔드 인스턴스가 비정상 상태임을 로드 밸런서가 선언하기 전에 시도하는 추가 상태 확인 시도의 최대 수입니다. 기본적으로 두 번의 상태 확인이 실패하고 나면 인스턴스가 비정상 상태로 간주됩니다.

        로드 밸런서는 비정상 인스턴스에 연결을 전송하는 것을 중지하지만, 이러한 인스턴스의 상태는 계속해서 모니터링하며 두 번의 연속된 상태 확인 시도를 통과하여 이들 인스턴스가 정상으로 판별되면 사용을 재개합니다.

      백엔드 인스턴스가 비정상 상태이지만 애플리케이션이 문제없이 실행되고 있다고 생각하는 경우에는 상태 프로토콜 및 상태 경로 값을 다시 확인하십시오. 또한 인스턴스가 연결된 보안 그룹을 확인하여 규칙이 로드 밸런서와 인스턴스 간에 트래픽을 허용하는지 확인하십시오.
      {: tip}

1. **작성**을 클릭하십시오.
1. 새 풀에 대한 항목 옆에서, **인스턴스** 열의 **연결**을 클릭하여 인스턴스를 풀에 추가하십시오. 풀에 더 많은 인스턴스를 추가하려면 **추가**를 클릭하십시오. 각 인스턴스에 대해 다음 정보를 지정하십시오.
   * 인스턴스를 선택할 서브넷을 하나 이상 선택하십시오.
   * 인스턴스를 선택하십시오. 인스턴스에 여러 인터페이스가 있는 경우에는 올바른 IP 주소를 선택했는지 확인하십시오.
   * 인스턴스에 트래픽을 전송하는 데 사용되는 포트를 지정하십시오.
   * 풀이 **가중치 적용된 라운드 로빈** 방법을 사용하는 경우에는 각 인스턴스의 가중치를 지정하십시오.  

      인스턴스에 가중치 '0'을 지정하는 것은 해당 인스턴스에 새 연결이 전달되지 않지만 현재 연결이 활성 상태인 한 기존 트래픽은 계속해서 플로우됨을 의미합니다. 가중치 '0'을 사용하는 것은 특정 인스턴스를 점진적으로 작동 중지시키면서 서비스 순번에서 제거하는 데 도움을 줍니다.
      {: tip}

1. **새 리스너**를 클릭하고 다음 정보를 지정하여 리스너를 작성하십시오. 리스너는 하나 이상 작성할 수 있습니다.
   * **프로토콜**: 수신 요청을 수신하는 데 사용할 프로토콜입니다.
   * **포트**: 요청이 수신되는 청취 포트입니다. 56500 - 56520 포트 범위는 관리 용도로 예약되어 있으며 사용할 수 없습니다.
   * **백엔드 풀**: 이 리스너가 트래픽을 전달하는 백엔드 풀입니다.
   * **최대 연결 수**(선택사항): 리스너가 허용하는 최대 동시 연결 수입니다.
   * **SSL 인증서**: 이 리스너에 대해 선택된 프로토콜이 HTTPS인 경우에는 SSL 인증서를 선택해야 합니다. 로드 밸런서가 해당 SSL 인증서에 액세스할 수 있도록 권한 부여되었는지 확인하십시오. 지시사항은 [시작하기 전에](#before)를 참조하십시오.
1. **작성**을 클릭하십시오.
1. 풀 및 리스너 작성을 완료한 후 **로드 밸런서 작성**을 클릭하십시오.
1. 기존 로드 밸런서의 세부사항을 보려면 **로드 밸런서** 페이지에서 로드 밸런서의 이름을 클릭하십시오.

## VPN 작성
가상 사설망(VPN)을 작성하여 VPC가 온프레미스 네트워크 또는 다른 VPC 등의 다른 사설 네트워크에 안전하게 연결할 수 있게 할 수 있습니다.

코드 예를 보려면 [VPN을 VPC와 함께 사용](/docs/vpc-on-classic-network?topic=vpc-on-classic-network---using-vpn-with-your-vpc)을 참조하십시오.
{: tip}

VPN을 작성하려면 다음 작업을 수행하십시오.
1. 탐색 분할창에서 **네트워크 > 로드 밸런서**를 클릭하십시오.
1. VPN 페이지에서 **새 VPN 게이트웨이**를 클릭하고 다음 정보를 지정하십시오.
    * **이름**: 가상 프라이빗 클라우드에 있는 VPN 게이트웨이의 이름을 입력하십시오(예: `my-vpn-gateway`).
    * **가상 프라이빗 클라우드**: VPC를 선택하십시오.
    * **리소스 그룹**: VPN의 리소스 그룹을 선택하십시오.
    * **서브넷**: VPN 게이트웨이를 작성할 서브넷을 선택하십시오.
1. **새 VPN 연결** 섹션에서 다음 정보를 지정하여 이 게이트웨이와 VPC 외부 네트워크 간의 연결을 정의하십시오.
    * **연결 이름**: 연결의 이름을 입력하십시오(예: `my-connection`).
    * **피어 게이트웨이 주소**: VPC 외부 네트워크에 대한 VPN 게이트웨이의 IP 주소를 지정하십시오.
    * **사전 공유된 키**: VPC 외부 네트워크에 대한 VPN 게이트웨이의 인증 키를 지정하십시오.
    * **로컬 서브넷**: VPN 터널을 통해 연결할 VPC 내의 서브넷을 하나 이상 지정하십시오.
    * **피어 서브넷**: VPN 터널을 통해 연결할 다른 네트워크 내의 서브넷을 하나 이상 지정하십시오.
1. 피어 게이트웨이가 활성 상태임을 확인하기 위해 클라우드 게이트웨이가 메시지를 전송하는 방법을 구성하려면 **작동 중지 피어 발견** 섹션에서 다음 정보를 지정하십시오.
    * **작동 중지 피어 발견 조치**: 피어 게이트웨이가 응답을 중지한 경우 취할 조치입니다. 예를 들어, 게이트웨이가 연결을 즉시 다시 조정하도록 하려면 **다시 시작**을 선택하십시오.
    * **간격**: 피어 게이트웨이의 활성 여부를 확인하는 빈도입니다. 기본적으로 메시지는 30초마다 전송됩니다.
    * **제한시간**: 피어 게이트웨이의 응답을 기다리는 시간입니다. 기본적으로 150초 내에 응답이 수신되지 않으면 피어 게이트웨이가 비활성 상태로 간주됩니다.
1. 연결에 대한 IKE 및 IPsec 보안 매개변수를 지정하십시오.
    * 클라우드 게이트웨이가 연결을 자동으로 설정하도록 하려면 **자동**을 선택하십시오.
    * 특정 보안 요구사항을 적용해야 하거나, 다른 네트워크에 대한 VPN 게이트웨이가 자동 조정에서 시도하는 보안 제안을 지원하지 않는 경우에는 사용자 정의 정책을 선택하거나 작성하십시오.

  **중요**: 연결에 대해 지정하는 IKE 및 IPsec 보안 매개변수는 VPC 외부 네트워크에 대한 게이트웨이에 설정된 매개변수와 동일해야 합니다.

## 축하합니다!

VPC 및 서브넷, ACL, 가상 서버 인스턴스, 블록 스토리지 볼륨, 보안 그룹, 유동 IP 주소, 로드 밸런서 및 VPN을 작성했습니다. 인스턴스, 서브넷 및 기타 리소스를 추가하여 계속해서 VPC를 개발할 수 있습니다.
